<div class="form-container">
    <h2 class="mat-title">Add new resource: {{ resourceTyoe }}</h2>
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
        <div
            dspDragDrop
            (click)="fileInput.click()"
            (fileDropped)="uploadFile($event)"
            class="dd-container"
        >
            <input
                hidden
                type="file"
                (change)="uploadFile($event)"
                #fileInput
            />
            <mat-icon class="upload-icon">cloud_upload</mat-icon>
            <div class="title">{{ fromLabels.drag_drop.upload }}</div>
            <div class="bottom-line">
                {{ fromLabels.drag_drop.drop_or_upload }}
            </div>
        </div>
        <div *ngIf="fileControl.value" class="files-list">
            <table>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Size</th>
                        <th>Last Modified Date</th>
                        <th>Delete</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>{{ file.name }}</td>
                        <td>{{ convertBytes(file.size) }}</td>
                        <td>{{ convertDate(file.lastModified) }}</td>
                        <td>
                            <!-- <button class="delete-file" (click)="deleteAttachment(i)"> -->
                            <button
                                class="delete-file"
                                (click)="deleteAttachment()"
                            >
                                X
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div formArrayName="titles">
            <mat-form-field
                *ngFor="let title of titlesArray.controls; let i = index"
                class="full-width"
            >
                <input
                    matInput
                    [formControlName]="i"
                    placeholder="{{ fromLabels.title }}"
                    #title
                />
            </mat-form-field>
        </div>
        <button
            class="add-button"
            (click)="addTitle()"
            title="Add another title"
        >
            <mat-icon>add_box</mat-icon>
            <!-- You can add moere than one title -->
        </button>
        <br />
        <mat-form-field class="full-width">
            <textarea
                matInput
                formControlName="description"
                placeholder="{{ fromLabels.description }}"
                #description
            ></textarea>
        </mat-form-field>
        <br />
        <mat-form-field class="full-width">
            <input
                matInput
                formControlName="date"
                placeholder="{{ fromLabels.date }}"
                #date
                type="date"
            />
        </mat-form-field>
        <br />
        <mat-form-field class="full-width">
            <input
                matInput
                formControlName="duration"
                placeholder="{{ fromLabels.duration }}"
                #duration
            />
        </mat-form-field>
        <br />
        <div formArrayName="persons">
            <mat-form-field
                *ngFor="let person of personsArray.controls; let i = index"
                class="full-width"
            >
                <input
                    matInput
                    [formControlName]="i"
                    placeholder="{{ fromLabels.person }}"
                    #person
                />
            </mat-form-field>
        </div>
        <button
            class="add-button"
            (click)="addPerson()"
            title="Add another person"
        >
            <mat-icon>add_box</mat-icon>
            <!-- You can add more tham one person -->
        </button>
        <br />
        <mat-form-field class="full-width">
            <input
                matInput
                formControlName="location"
                placeholder="{{ fromLabels.location }}"
                #location
            />
        </mat-form-field>
        <br />
        <mat-form-field class="full-width">
            <textarea
                matInput
                formControlName="transcript"
                placeholder="{{ fromLabels.transcript }}"
                #transcript
            ></textarea>
        </mat-form-field>

        <button
            mat-raised-button
            (click)="resetForm()"
            type="button"
            class="reset-button"
        >
            {{ fromLabels.reset }}
        </button>

        <button
            mat-raised-button
            [disabled]="!form.valid"
            type="submit"
            class="submit-button"
        >
            {{ fromLabels.save }}
        </button>
    </form>
</div>

<pre>{{ form.value | json }}</pre>
